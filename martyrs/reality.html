<!DOCTYPE html>
<html lang="en" class=""><head><script>window.livecodes = window.livecodes || {};</script><title>Palestinian Martyrs
</title><meta name="title" content="Palestinian Martyrs
"><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"><style id="__livecodes_styles__">#race { height: 95vh;}
</style><script src="https://cdn.jsdelivr.net/npm/es-module-shims@1.10.0/dist/es-module-shims.js" async=""></script><script type="importmap">{
  "imports": {
    "racing-bars": "http://127.0.0.1:8080/build/racing-bars.js",
    "racing-bars/react": "http://127.0.0.1:8080/build/react.js",
    "racing-bars/vue": "http://127.0.0.1:8080/build/vue.js"
  }
}</script>
<style>
  #race text.label, #race text.label.outside-bars, #race text.legend-text, #race text.valueLabel, .tick text, #race text.dateCounterText {
    font-family: 'Cormorant Infant' !important;
}
  #race .halo {
    fill: none !important;
    stroke: none !important;
}
  #race text.dateCounterText {
    fill: #253551 !important;
}
</style>
</head><body><div id="race"></div><script type="module">import { loadData, race } from 'https://racing-bars.hatemhosny.dev/lib/racing-bars.js';

const options = {
  selector: '#race',
  dataShape: 'wide',
  dateCounter: 'DD MMM YYYY',
  tickDuration: 500,
  labelsPosition: 'outside',
  fixedScale: true,
  fixedOrder: ['Injured', 'Killed', 'Children Killed', 'Women Killed', 'Medicals Killed', 'Press Killed', ''],
  colorMap: {
    'Injured': '#253551',
    'Killed': '#253551',
    'Children Killed': '#253551',
    'Women Killed': '#253551',
    'Medicals Killed': '#253551',
    'Press Killed': '#253551',
  }
};

loadData('https://data.techforpalestine.org/api/v2/casualties_daily.min.json').then((data) => {
  data = data.map((d) => ({
    date: d.report_date,
    "Injured": d.ext_injured_cum,
    "Killed": d.ext_killed_cum,
    "Children Killed": d.ext_killed_children_cum,
    "Women Killed": d.ext_killed_women_cum,
    "Medicals Killed": d.ext_med_killed_cum,
    "Press Killed": d.ext_press_killed_cum,
  }));
  race(data, options);

  // After the race chart is drawn, find the label for "Press Killed" and add a link
  const labelSelector = '#race text.label';  // Adjust this based on how the labels are rendered
  const labels = document.querySelectorAll(labelSelector);

  labels.forEach(label => {
    if (label.textContent.includes("Press Killed")) {
      // Wrap the label text with a link
      const originalText = label.textContent;
      const link = document.createElement('a');
      link.href = 'https://example.com';  // Example URL
      link.target = '_blank';  // Open in a new tab
      link.textContent = originalText;
      label.textContent = '';  // Clear the original label text
      label.appendChild(link);  // Append the link to the label
    }
  });
});
</script></body></html>
